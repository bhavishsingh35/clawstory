{% extends "base.html" %}

{% block title %}Collections | The ClawStory{% endblock %}

{% block meta_description %}Explore curated fashion collections at The ClawStory. Premium styles crafted for everyday wear and modern lifestyles.{% endblock %}

{% block content %}
<div class="-mx-4 -my-10 px-4 py-12 bg-[#1a1a1a]">

<section class="max-w-7xl mx-auto" aria-labelledby="collections-heading">

  <!-- =====================================================
       HEADER
  ====================================================== -->
  <header class="mb-10">
    <h1 id="collections-heading"
        class="text-3xl md:text-4xl font-extrabold text-white tracking-wide mb-2">
      Collections
    </h1>
    <p class="text-gray-400">
      Curated collections designed for everyday style.
    </p>
  </header>

  <!-- =====================================================
       COLLECTION GRID
  ====================================================== -->
  {% if collections %}
  <div
    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"
    aria-label="Product collections"
  >

    {% for collection in collections %}
    <article
      class="group bg-white rounded-xl shadow-sm
             hover:shadow-lg transition
             overflow-hidden flex flex-col"
    >
      <a
        href="{% url 'pages:collection_detail' collection.slug %}"
        aria-label="View {{ collection.name }} collection"
      >

        <!-- IMAGE -->
        <div class="relative aspect-square bg-gray-100 overflow-hidden">
          {% if collection.image_url %}
            <img
              src="{{ collection.image_url }}"
              alt="{{ collection.name }} collection"
              loading="lazy"
              width="600"
              height="600"
              class="absolute inset-0 w-full h-full object-cover
                     transition-transform duration-300
                     group-hover:scale-105"
            />
          {% else %}
            <div class="absolute inset-0 flex items-center justify-center text-gray-400 text-sm">
              No image available
            </div>
          {% endif %}
        </div>

        <!-- CONTENT -->
        <div class="p-4">
          <h2 class="text-lg font-semibold text-gray-900">
            {{ collection.name }}
          </h2>

          <!--
            IMPORTANT:
            We intentionally DO NOT call collection.products.count here
            to avoid N+1 queries.
            If counts are needed later, annotate in the view.
          -->

          <span
            class="inline-block mt-3 text-sm font-medium
                   text-[#c7b27c] group-hover:underline"
          >
            View Collection â†’
          </span>
        </div>
      </a>
    </article>
    {% endfor %}

  </div>
  {% else %}
    <p class="text-gray-400">
      No collections available.
    </p>
  {% endif %}

</section>
</div>
{% endblock %}
