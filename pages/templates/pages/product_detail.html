{% extends "base.html" %}
{% block title %}{{ product.name }} | Buy Online at Best Price{% endblock %}

{% block content %}
<section class="max-w-7xl mx-auto px-4 py-8">

  <!-- Breadcrumb -->
  <nav class="text-sm text-gray-500 mb-4">
    <a href="{% url 'pages:home' %}" class="hover:underline">Home</a> /
    <a href="{% url 'pages:collection_list' %}" class="hover:underline">Collections</a> /
    <span class="text-gray-700">{{ product.name }}</span>
  </nav>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">

    <!-- IMAGE -->
    <div class="flex justify-center">
      <div class="w-[320px] sm:w-[380px] md:w-[420px] bg-gray-100 rounded-xl overflow-hidden">
        {% if product.image %}
        <img
          src="{{ product.image.url }}"
          alt="{{ product.name }}"
          class="w-full h-auto object-contain"
        >
        {% endif %}
      </div>
    </div>

    <!-- DETAILS -->
    <div class="space-y-4">

      <h1 class="text-3xl font-bold text-gray-900">
        {{ product.name }}
      </h1>

      <p class="text-2xl font-semibold text-gray-900">
        â‚¹{{ product.price }}
      </p>

      {% if product.stock > 0 %}
        <p class="text-green-600 font-medium">
          âœ” In Stock ({{ product.stock }} available)
        </p>
      {% else %}
        <p class="text-red-600 font-medium">
          âœ– Out of Stock
        </p>
      {% endif %}

      {% if product.description %}
      <p class="text-gray-700 leading-relaxed">
        {{ product.description }}
      </p>
      {% endif %}

      <!-- ADD TO CART -->
      {% if product.stock > 0 %}
      <form
        method="get"
        action="{% url 'cart:cart_add' product.id %}"
        class="flex flex-col sm:flex-row gap-4 mt-4"
      >
        <div>
          <label class="block text-sm font-medium mb-1">Quantity</label>
          <input
            type="number"
            name="qty"
            value="1"
            min="1"
            max="{{ product.stock }}"
            class="w-24 border rounded-md px-3 py-2"
          >
        </div>

        <button
          type="submit"
          class="bg-yellow-400 hover:bg-yellow-500 text-black px-6 py-3 rounded-lg font-semibold transition"
        >
          Add to Cart
        </button>

        <a
          href="{% url 'cart:cart_detail' %}"
          class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-semibold transition text-center"
        >
          Buy Now
        </a>
      </form>
      {% endif %}

      <!-- TRUST -->
      <div class="border-t pt-4 text-sm text-gray-600 space-y-1">
        <p>ðŸšš Free delivery above â‚¹999</p>
        <p>ðŸ”„ 7-day replacement</p>
        <p>ðŸ”’ Secure payments</p>
      </div>

    </div>
  </div>
</section>
{% endblock %}